<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MMCL Space Booking Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="dashboard.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
</head>
<body>
    <div class="container-fluid">
        <header class="py-4 mb-4 border-bottom">
            <div class="row align-items-center">
                <div class="col">
                    <h1 class="display-5">MMCL Space Booking Dashboard</h1>
                    <p class="text-muted">Media Creation Spaces</p>
                </div>
                <div class="col-auto text-end">
                    <p class="mb-0 text-muted small">Last Updated Before MMCL Opened on</p>
                    <p class="mb-0 fw-bold">November 16, 2025</p>
                </div>
            </div>
        </header>

        <section id="availability" class="mb-5">
            <div class="row mb-3">
                <div class="col">
                    <h2 class="h3">Next Available Booking for Each Space</h2>
                    <p class="text-muted">Data is updated each morning and shows the next available timeslot for each space. Color indicates booking demand: <span class="badge" style="background-color: rgb(34, 197, 94)">Available Today</span> <span class="badge" style="background-color: rgb(234, 179, 8)">Tomorrow</span> to <span class="badge" style="background-color: rgb(239, 68, 68)">14+ Days Out</span></p>
                </div>
            </div>

            <div class="location-section mb-4">
                <h3 class="h5 mb-3">Scott Library Making & Media Creation Lab</h3>
                <div class="row g-3">

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(234, 179, 8)">
                            <div class="card-body">
                                <h4 class="card-title h6">Scott 203E - VR/Podcasting Room</h4>
                                <p class="card-text text-muted small mb-2">VR Rooms</p>
                                <div class="availability-badge" style="background-color: rgb(234, 179, 8)">
                                    <div class="days-until">Tomorrow</div>
                                    <div class="next-date">2025-11-17 11:00</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 29.4%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Scott 203G - VR Room</h4>
                                <p class="card-text text-muted small mb-2">VR Rooms</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 14:00</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Scott 203K - Audio Recording Studio</h4>
                                <p class="card-text text-muted small mb-2">Audio Recording Rooms</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 14:00</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 10.3%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(237, 110, 44)">
                            <div class="card-body">
                                <h4 class="card-title h6">Scott 204 - Flex Studio</h4>
                                <p class="card-text text-muted small mb-2">Flex Studio Spaces</p>
                                <div class="availability-badge" style="background-color: rgb(237, 110, 44)">
                                    <div class="days-until">9 days</div>
                                    <div class="next-date">2025-11-25 11:00</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 74.3%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Scott 207C - Audio Recording Booth</h4>
                                <p class="card-text text-muted small mb-2">Audio Recording Rooms</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 14:00</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 7.3%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Scott 207D - Audio Recording Booth</h4>
                                <p class="card-text text-muted small mb-2">Audio Recording Rooms</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 14:00</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="location-section mb-4">
                <h3 class="h5 mb-3">Markham Library Media Creation Studios and Equipment</h3>
                <div class="row g-3">

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Editing and Music Studio #1 (Rm 3060G)</h4>
                                <p class="card-text text-muted small mb-2">Editing Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Editing and Music Studio #2 (Rm 3060F)</h4>
                                <p class="card-text text-muted small mb-2">Editing Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Editing and Music Studio #3 (Rm 3060E)</h4>
                                <p class="card-text text-muted small mb-2">Editing Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Green Screen Video Studio (Rm 3060C)</h4>
                                <p class="card-text text-muted small mb-2">Video Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Mixed Use Studio (Rm 3045)</h4>
                                <p class="card-text text-muted small mb-2">Large Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Podcast Studio #1 (Rm 3060B)</h4>
                                <p class="card-text text-muted small mb-2">Podcast Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Podcast Studio #2 (Rm 3060D)</h4>
                                <p class="card-text text-muted small mb-2">Podcast Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 16:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 8.1%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Video and Photo Studio (Rm 3060H)</h4>
                                <p class="card-text text-muted small mb-2">Video Studios</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <div class="location-section mb-4">
                <h3 class="h5 mb-3">Markham Library Visualization Studio and Gaming Lab</h3>
                <div class="row g-3">

                    <div class="col-md-6 col-lg-4 col-xl-3">
                        <div class="card space-card h-100" style="border-left: 4px solid rgb(34, 197, 94)">
                            <div class="card-body">
                                <h4 class="card-title h6">Gaming Lab (Rm 3050)</h4>
                                <p class="card-text text-muted small mb-2">Gaming Lab</p>
                                <div class="availability-badge" style="background-color: rgb(34, 197, 94)">
                                    <div class="days-until">Today</div>
                                    <div class="next-date">2025-11-16 13:30</div>
                                </div>
                                <div class="mt-2">
                                    <small class="text-muted">1-Week Booking Rate: 0.0%</small>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </section>

        <section id="trends" class="mb-5">
            <div class="row mb-3">
                <div class="col">
                    <h2 class="h3">Booking Rate Trends</h2>
                    <p class="text-muted">Weekly booking rates over time (Monday data only)</p>
                </div>
            </div>

            <div class="location-section mb-4">
                <h3 class="h5 mb-3">Scott Library Making & Media Creation Lab</h3>
                <div class="chart-container">
                    <canvas id="chart_Scott_Library_Making_and_Media_Creation_Lab"></canvas>
                </div>
            </div>

            <div class="location-section mb-4">
                <h3 class="h5 mb-3">Markham Library Media Creation Studios and Equipment</h3>
                <div class="chart-container">
                    <canvas id="chart_Markham_Library_Media_Creation_Studios_and_Equipment"></canvas>
                </div>
            </div>

            <div class="location-section mb-4">
                <h3 class="h5 mb-3">Markham Library Visualization Studio and Gaming Lab</h3>
                <div class="chart-container">
                    <canvas id="chart_Markham_Library_Visualization_Studio_and_Gaming_Lab"></canvas>
                </div>
            </div>

        </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="dashboard.js"></script>
    <script>
        // Initialize charts with data

        const timeSeriesDates = ["2025-11-03", "2025-11-10"];
        const timeSeriesByLocation = {"Scott Library Making & Media Creation Lab": [{"space_id": "21083", "space_name": "Scott 203E - VR/Podcasting Room", "data": [10.0, 30.0]}, {"space_id": "21082", "space_name": "Scott 203G - VR Room", "data": [0.0, 0.0]}, {"space_id": "19905", "space_name": "Scott 203K - Audio Recording Studio", "data": [5.71, 5.71]}, {"space_id": "19904", "space_name": "Scott 204 - Flex Studio", "data": [61.43, 63.57]}, {"space_id": "29187", "space_name": "Scott 207C - Audio Recording Booth", "data": [5.0, 5.71]}, {"space_id": "32502", "space_name": "Scott 207D - Audio Recording Booth", "data": [7.14, 7.14]}], "Markham Library Visualization Studio and Gaming Lab": [{"space_id": "33206", "space_name": "Gaming Lab (Rm 3050)", "data": [0.0, 2.33]}], "Markham Library Media Creation Studios and Equipment": [{"space_id": "30721", "space_name": "Editing and Music Studio #1 (Rm 3060G)", "data": [0.0, 0.0]}, {"space_id": "30722", "space_name": "Editing and Music Studio #2 (Rm 3060F)", "data": [0.0, 0.0]}, {"space_id": "30723", "space_name": "Editing and Music Studio #3 (Rm 3060E)", "data": [1.55, 3.88]}, {"space_id": "30719", "space_name": "Green Screen Video Studio (Rm 3060C)", "data": [1.55, 0.0]}, {"space_id": "33193", "space_name": "Mixed Use Studio (Rm 3045)", "data": [0.0, 3.88]}, {"space_id": "31827", "space_name": "Podcast Studio #1 (Rm 3060B)", "data": [0.0, 0.0]}, {"space_id": "30701", "space_name": "Podcast Studio #2 (Rm 3060D)", "data": [1.55, 2.33]}, {"space_id": "30720", "space_name": "Video and Photo Studio (Rm 3060H)", "data": [1.55, 0.0]}]};
        
        // Create a chart for each location
        Object.keys(timeSeriesByLocation).forEach(locationName => {
            const locationId = locationName.replace(/ /g, '_').replace(/&/g, 'and');
            const spaces = timeSeriesByLocation[locationName];
            
            const datasets = spaces.map((space, index) => ({
                label: space.space_name,
                data: space.data,
                borderColor: getColorForIndex(index),
                backgroundColor: getColorForIndex(index, 0.1),
                tension: 0.3,
                pointRadius: 4,
                pointHoverRadius: 6
            }));
            
            createChart(`chart_${locationId}`, timeSeriesDates, datasets);
        });

    </script>
</body>
</html>
